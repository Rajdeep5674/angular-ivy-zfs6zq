<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<div class="jumbotron card ">
  <h1>askany.com</h1>      
  <p>Post any query/thoughts here. Everyone can see your post </p>
</div>

<!--login and signup section start-->
  <div class="alert alert-info card" role="alert">
  Please login to post your query. You can like/comment on other's posts as well.<br><small class="font-italic">Note: You can always view all the posts without login.</small>
</div>
  <!--existing user login-->
    &nbsp; &nbsp;<button type="button" class="btn btn-success" (click)="login();">Login</button> &nbsp;&nbsp;&nbsp;

  <div class="card border py-3" [hidden]="signup_closed" *ngIf="signup_boolean">
    <div class="container">
        <h1>Login form</h1>
              <form (ngSubmit)="loginAuthCheck();" #loginForm="ngForm">
            <div class="form-group">
                <label for="user_id_for_login"></label>
                <input type="text" class="form-control" id="user_id_for_login"
                      required
                      [(ngModel)]="LoginModel.user_id" name="user_id_for_login"
                      #user_id_for_login="ngModel" placeholder="Enter your user id">
                <div [hidden]="user_id_for_login.valid || user_id_for_login.untouched"
                    class="alert alert-danger">
                  Userid is required
                </div>
              </div>

              <div class="form-group">
                <label for="password1"></label>
                <input type="password" class="form-control" id="password_for_login"
                      required
                      [(ngModel)]="LoginModel.password" name="password_for_login"
                      #password_for_login="ngModel" placeholder="Enter your password">
                <div [hidden]="password_for_login.valid || password_for_login.untouched"
                    class="alert alert-danger">
                  Password is required
                </div>
              </div>
              <button type="submit" class="btn btn-success" [disabled]="!loginForm.form.valid">Submit</button>&nbsp;&nbsp;&nbsp;
              <button type="button" class="btn btn-success" (click)="cancel_login();">Cancel</button><br>
            </form>
          </div>
        </div>
  <!--existing user login end-->

  <!--new user login-->
  <button type="button" class="btn btn-success" (click)="singup();">Sign up</button>
  <hr>
  <div class="card border py-3"[hidden]="signup_closed" *ngIf="signup_boolean">
    <div class="container">
        <h1>Fill the details below</h1>
              <form (ngSubmit)="signup_form_submitted();" #signupForm="ngForm">
              <div class="form-group">
                <label for="name"></label>
                <input type="text" class="form-control" id="full_name"
                      required
                      [(ngModel)]="CustomerDetaillsRoot.full_name" name="full_name"
                      #full_name="ngModel" placeholder="Enter your full name">
                <div [hidden]="full_name.valid || full_name.untouched"
                    class="alert alert-danger">
                  Name is required
                </div>
              </div>

              <div class="form-group">
                <label for="email"></label>
                <input type="email" class="form-control" id="email"
                      required
                      [(ngModel)]="CustomerDetaillsRoot.email" name="email"
                      #email="ngModel" placeholder="Enter your email id">
                <div [hidden]="email.valid || email.untouched"
                    class="alert alert-danger">
                  Email is required
                </div>
              </div>

              <div class="form-group">
                <label for="user_id"></label>
                <input type="text" class="form-control" id="user_id"
                      required
                      [(ngModel)]="CustomerDetaillsRoot.user_id" name="user_id"
                      #user_id="ngModel" placeholder="Set your user id">
                      <small>Please set your user id as unique. This will be required while login.</small>
                <div [hidden]="user_id.valid || user_id.untouched"
                    class="alert alert-danger">
                  Userid is required
                </div>
              </div>

              <div class="form-group">
                <label for="password1"></label>
                <input type="password" class="form-control" id="password1"
                      required
                      [(ngModel)]="CustomerDetaillsRoot.password1" name="password1"
                      #password1="ngModel" placeholder="Set your password">
                      <small>Please do not set default passwords like 123/test/abc or your name</small>
                <div [hidden]="password1.valid || password1.untouched"
                    class="alert alert-danger">
                  Password is required
                </div>
              </div>

              <div class="form-group">
                <label for="password2"></label>
                <input type="password" class="form-control" id="password2"
                      required
                      [(ngModel)]="CustomerDetaillsRoot.password2" name="password2"
                      #password2="ngModel" placeholder="Confirm your password">
                <div [hidden]="password2.valid || password2.untouched"
                    class="alert alert-danger">
                  Password is required
                </div>
              </div>

              <a href="#message"><button type="submit" class="btn btn-success" [disabled]="!signupForm.form.valid">Submit</button></a>&nbsp;&nbsp;&nbsp;
              <button type="button" class="btn btn-success" (click)="cancel_signup();">Cancel</button><br>
              <small>By clicking submit you accept the <button type="button" (click)="terms();">terms and conditions</button> of askany.com</small>
              <hr>
          </form>
      </div>
  </div>
  <!--new user login end-->
<!--login and signup section end-->

<div class="card border py-3">
  <div class="container">
  <div [hidden]="submitted">
    <h1>Post Here</h1>
    <form (ngSubmit)="onSubmit()" #heroForm="ngForm">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name"
               required
               [(ngModel)]="PostModel.name" name="name"
               #name="ngModel" placeholder="Enter your name">
        <div [hidden]="name.valid || name.untouched"
             class="alert alert-danger">
          Name is required
        </div>
      </div>

      <textarea rows="4" cols="50" name="message" class="form-control" id="message"
               required
               [(ngModel)]="PostModel.message"
               #name="ngModel" placeholder="Enter your message/query/post here">Type here..</textarea><br>

      <button type="submit" class="btn btn-success" [disabled]="!heroForm.form.valid">Post</button>
      <hr>
    </form>
  </div>
            <button type="button" class="btn btn-success" (click)="viewAllPost();">View all posts</button>&nbsp; &nbsp; &nbsp; &nbsp;

            <button type="button" class="btn btn-success" (click)="hideAllPost();">Hide all posts</button><br><br>
  <div [hidden]="!submitted">
    <p>{{message_to_user}}</p>
    <button class="btn btn-success" (click)="submitted=false">Back</button>
  </div>

    <div [hidden]="!view_all_post" class="container border py-2 m-2">
      <div class="card py-2 " *ngFor="let post_id of data_length_array">
        <h5><span class="badge badge-secondary py-3 m-3">{{ data[post_id].full_name }}</span><hr></h5>
        <p class="m-2">{{ data[post_id].message }}</p>
        <hr>
        <small *ngIf="PostIdAndMessageToUser.post_id===(post_id+1);else elseBlock" style="color:blue">&nbsp;&nbsp;{{PostIdAndMessageToUser.message_to_user}}</small>
        <ng-template #elseBlock><small>&nbsp;{{data[post_id].like_count}}&nbsp;people liked this post</small></ng-template>
        <br>
        <!--form for accepting the comment-->
        <div [hidden]="go" *ngIf="PostIdAndMessageToUser.post_id_for_comment===(post_id+1)">
          <form (ngSubmit)="commentSubmitted(post_id)" #commentForm="ngForm">
              <div class="form-group">
                <label for="name"></label>
                <input type="text" class="form-control" id="commentor_name"
                      required
                      [(ngModel)]="CommentModel.commentor_name" name="commentor_name"
                      #commentor_name="ngModel" placeholder="Enter your name">
                <div [hidden]="commentor_name.valid || commentor_name.untouched"
                    class="alert alert-danger">
                  Name is required
                </div>
              </div>
              <input type="hidden" id="hidden_post_id" [(ngModel)]="CommentModel.post_id" value="post_id" name="hidden_post_id"> 
              <textarea rows="4" cols="50" name="comment" class="form-control" id="comment"
                      required
                      [(ngModel)]="CommentModel.comment"
                      #message="ngModel" placeholder="Type your comment here." name="comment"></textarea><br>
              <button type="submit" class="btn btn-success" [disabled]="!commentForm.form.valid">Go</button>&nbsp;&nbsp;&nbsp;
              <button type="button" class="btn btn-success" (click)="cancel(post_id+1);">Cancel</button>
              <hr>
          </form>
          <!--end of comment form-->
        </div>
        <div *ngIf="view_all_comments_boolean && PostIdComments.post_id===(post_id+1)">
            <div *ngIf="no_comments_yet; else elseBlock">
              <small style="color:blue">&nbsp;Oops!! no comment yet, be the first one to comment !!</small>
            </div>
            <ng-template #elseBlock>
          <div class="card py-2 " *ngFor="let comment of comment_array">
            <small style="color:blue">&nbsp;{{data_from_server_for_comment[comment].commentor_name}}:</small>
            <small>&nbsp;{{data_from_server_for_comment[comment].comment}}</small>
          </div>
            </ng-template>

        </div>
      <div class="text-center py-2">
          <button class="btn btn-success" (click)="like(post_id+1);" [disabled]="like_button_pressed.includes(post_id+1)"
>like</button>&nbsp;&nbsp;
          <button class="btn btn-success" (click)="comment(post_id+1);" >comment</button><br>&nbsp;&nbsp;<br>
           <button class="btn btn-success" (click)="view_all_comments(post_id+1);">View all comments</button><br><br>
           <button class="btn btn-success" (click)="hide_all_comments(post_id+1);">Hide all comments</button>
      </div>
      </div>
    </div>
    <div>
    </div>
</div>
</div>


<footer class="page-footer font-small blue">

  <!-- Copyright -->
  <div class=" card bg-light footer-copyright text-center py-3">© 2020 Copyright:
    <a href="">askany.com</a>
  </div>
  <!-- Copyright -->

</footer>
<!-- Footer -->
